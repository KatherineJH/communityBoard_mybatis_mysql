<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>게시글 수정</title>
  </head>
  <body>
    <h1>게시글 수정</h1>
    <!--  action="board/update" 이랑,
      <input type="hidden" name="id" th:value="${board.id}"> 이랑,
      반드시(?) 동시에 추가 해줘야 한다. 
      hidden으로 게시글 id는 안보이게 해놓은 상황.-->
    <form action="/board/update" method="post" id="form">
      <input type="hidden" name="id" th:value="${board.id}" />
      <table border="1">
        <tr>
          <th>제목</th>
          <td>
            <input type="text" name="title" th:value="${board.title}" />
          </td>
        </tr>
        <tr>
          <th>작성자</th>
          <td>
            <input type="text" name="writer" th:value="${board.writer}" />
          </td>
        </tr>
        <tr>
          <td colspan="2">
            <textarea
              name="content"
              rows="5"
              cols="40"
              th:text="${board.content}"
            ></textarea>
          </td>
        </tr>
        <tr>
          <td colspan="2">
            <button type="submit">수정</button>
            <button type="button" onclick="remove()">삭제</button>
            <button type="button" onclick="location.href='/board/list'">
              목록
            </button>
          </td>
        </tr>
      </table>
    </form>

    <script>
      const form = document.getElementById("form");

      function remove() {
        if(!confirm("Do you really want to delete this post?"))
            return
        form.action = "/board/delete"; // action 속성 변경
        form.submit(); // 요청 전송(제출)
      }
    </script>
  </body>
</html>
